\documentclass[10pt, a4paper, italian]{article}
\input{../../latex/preamble}
\input{../../latex/math}
\geometry{left=2cm, right=2cm, top=2cm, bottom=2cm}

% indexes subsections with letters, sections with numbers (1.a, 1.b, ...)
\renewcommand{\thesubsection}{\thesection.\alph{subsection}}

% lets graphicx know path where figures to be included are found
\graphicspath{{../figs/}}

\author{Gruppo 1.AC \\ Matteo Rossi, Bernardo Tomelleri}
\title{Es05A: Applicazioni non-lineari di amplificatori operazionali}
\begin{document}
\date{\today}
\maketitle

\setcounter{section}{0}

\section*{Misura componenti dei circuiti}
\begin{table}[htbp]
\centering
\begin{tabular}{cccccc}
\toprule
Resistenze $[\si{\ohm}]$ & $R$ & $\sigma R$ & Capacità $[\si{n\F}]$ & $C$ &
$\sigma C$ \\
\midrule
\midrule
$R_1$	  	& 992 	& 8		& $C_1$ & 212	& 9 \\
$R_2$	  	& 992	& 8		& & & \\
$R_4$	  	& 991	& 8		& & & \\
$R_5$	  	& 9.96 k	& 0.08	k& & & \\
$R_6$	  	& 99.9 k	& 0.8	k& & & \\
$R_7$	  	& 9.96 k& 0.08	k	& & & \\
$R_8$	  	& 104.6	k& 8		k& & & \\
$R_9$	  	& 103.0	k& 0.8	k	& & & \\
$R_{10}$  	& 100.6	k& 8		k& & & \\
$R_{11}$  	& 1.911	& 8		& & & \\
\bottomrule     
\end{tabular}
\caption{Valori di resistenza e capacità misurate per i componenti dei
circuiti studiati. \label{tab: rcmes_B}}

\begin{tabular}{cccccc}
\toprule
Resistenze $[\si{\ohm}]$ & $R$ & $\sigma R$ & Capacità $[\si{n\F}]$ & $C$ &
$\sigma C$ \\
\midrule
\midrule
$R_1$	  	& 996 	& 8		& $C_1$ & 207	& 9 \\
$R_2$	  	& 994	& 8		& & & \\
$R_4$	  	& 999	& 8		& & & \\
$R_5$	  	& 9.95	k& 0.08	k& & & \\
$R_6$	  	& 99.1	k& 0.8	k& & & \\
$R_7$	  	& 9.96	k& 0.08		k& & & \\
$R_8$	  	& 99.6	k& 0.8		k& & & \\
$R_{10}$  	& 99.8	k& 0.8		k& & & \\
$Pot_{R_9}$ & 103.4 k & 0.8 k& & & \\
$Pot_{R_11}$& 1.99 k & 0.08 k& & &\\
\bottomrule   
\end{tabular}
\caption{Valori di resistenza e capacità misurate per i componenti dei
circuiti studiati. \label{tab: rcmes_M}}
\end{table}

Riportiamo per completezza anche i valori delle tensioni di alimentazione
continue per l'op-amp misurate con il multimetro
\begin{align*}
V_{CC} &= 4.99 \pm 0.03 \si{\V} \\
V_{EE} &= -4.99 \pm 0.03 \si{\V}
\end{align*}


\subsection*{Nota sul metodo di fit}
Per determinare i parametri ottimali e le rispettive covarianze si \`e
implementato in \verb+Python+ un algoritmo di fit basato sui minimi quadrati
mediante la funzione \emph{curve\_fit} della libreria \texttt{SciPy}.

%=======================
\section{Generatore di Noise}
Il primo passo per la costruzione del circuito P.I.D. è la realizzazione del circuito di lettura. Nel nostro caso abbiamo realizzato un sistema di rilevazione di intensità luminosa basato su due circuiti per identici per emissione di luce (uno per il disturbo e l'altro di controllo) e un partitore di tensione costruito tramite una resistenza e una fotoresistenza.
\begin{figure}[H]
    \centering
	\includegraphics[scale=0.3]{noisegen}
    \caption{Schema circuitale per emissione e rilevazione intensità luminosa.
    \label{fig: Draft1}}
\end{figure}
\subsection{Funzionamento}
La fororesistenza è una resistenza variabile, che cambia col valore dell'intensità luminosa che incide su di essa, in particolare sappiamo che resistenza e quantità di luce sono inversamente proporzionali: maggiore sarà la luce incidente sulla superficie, minore sarà la sua resistenza.
Sappiamo dalla formula del partitore di tensione che il il valore dell'uscita MEAS sarà uguale a
\begin{equation}
V_{meas}=(V_{CC}- V_{EE})\frac{R_4}{R_4 + R_3}  + V_{EE}
\end{equation}
Ci aspettiamo quindi che aumentando la luce (per esempio nel nostro caso pilotando l'ingresso del LED driver di disturbo con una rampa), il valore di $V_{meas}$ andrà ad aumentare di conseguenza sempre nell'intervallo prefissato $(V_{EE},V_{CC})$.
Si è quindi presa una serie di misure di $V_{meas}$ per valori di tensione continua diversi all'entrata $AD2_{W2}$.
\begin{table}[H]
\centering
\begin{tabular}{@{}ll@{}}
\toprule
$V_{AD2_{W2}} [\si{\V}]$ & $V_{meas} [\si{\V}]$\\
\midrule
$-4.2 \pm 0.3$ m 	& $ -4.99 \pm 0.05$	\\
$995 \pm 7$ m 	& $ -2.11 \pm 0.02 $	\\
$1.99 \pm 0.02$ 	& $ -1.01 \pm 0.08 $\\
$2.98 \pm 0.04$ 	& $ -359 \pm 3 $ m\\
$3.98 \pm 0.04$ 	& $ 42.1 \pm 0.7 $ m\\
$4.98 \pm 0.05$ 	& $ 335 \pm 3$ m\\

\bottomrule
\end{tabular}
\caption{Misura di $V_{meas}$ in funzione della tensione in ingresso nel LED driver di disturbo}
\end{table}
Come ci aspettavamo il valore di $V_{meas}$ cresce aumentando la luce incidente, nel nostro caso, aumentando la tensione in ingresso $V_{AD2_{W2}}$.
%=======================
\section{Amplificatore del Noise rispetto al Set}
Si è costruito un amplificatore differenziale con guadagno $\approx 10$ a partire dalle resistenze $R_5$,$R_6$ e $R_7$,$R_8$ secondo lo schema in figura .
\begin{figure}[H]
    \centering
	\includegraphics[scale=0.7]{errorgen}
    \caption{Schema circuitale per l'amplificatore differenziale 
    \label{fig: Draft1}}
\end{figure}
Lo scopo del circuito in figura è quello di amplificare la differenza tra i segnali $V_{set}$ e $V_{meas}$ di un fattore 10.
Si è quindi provato il guadagno per entrambi gli ingressi, inviando un segnale a uno e mettendo l'altro a massa; ci si aspetta che nel caso in cui set sia collegato al segnale in ingresso, l'uscita deve essere invertita, invece nell'altro caso meas e error devono essere in fase.
\begin{figure}[H]
    \centering
	\includegraphics[scale=0.7]{error.set}
    \caption{Segnali in ingresso e uscita per l'amplificatore differenziale con meas collegato a massa: in giallo il canale Set, in blu il canale error.
    \label{fig: Draft1}}
\end{figure}
\begin{figure}[H]
    \centering
	\includegraphics[scale=0.7]{error.meas}
    \caption{Segnali in ingresso e uscita per l'amplificatore differenziale con set collegato a massa: in giallo il canale Meas, in blu il canale error.
    \label{fig: Draft1}}
\end{figure}
Abbiamo quindi calcolato il guadagno come $A = \frac{V_{error}}{V_{signal}}$, che dà come risultato
\[
A=-10.01 \pm 0.14 
\]
\[
A=10.01 \pm 0.14
\]
per set e meas rispettivamente.\\
Per controllare la tensione di riferimento si è poi costruito un circuito che permettesse di variare $V_{set}$ nel solito intervallo $(V_{EE},V_{CC})$, per farlo abbiamo utilizzato un potenziometro da $2 k\ohm$.
\begin{figure}[H]
    \centering
	\includegraphics[scale=0.7]{setgen}
    \caption{Schema circuitale per la configurazione  della tensione del segnale di riferimento 
    \label{fig: Draft1}}
\end{figure}
Chiaramente essendo un amplificatore di differenza tra 2 segnali, nel caso in cui meas e set siano uguali $\implies$ la differenza è nulla $\implies V_{error} = 0$. Difatti utilizzando il canale uno per misurare il segnale meas rispetto al segnale set (per registrare la differenza tra i due segnali), e il canale 2 a misurare error rispetto a massa si registra quanto aspettato
\begin{figure}[H]
    \centering
	\includegraphics[scale=0.7]{meas.same.set}
    \caption{segnali nella condizione in cui il valore di set e meas sono uguali, nel canale uno si misura il valore di meas rispetto a set, nel canale due invece error rispetto a massa.
    \label{fig: Draft1}}
\end{figure}
%=======================
\section{Controllo integrale}
%=======================
\section{Controllo proporzionale}
%=======================
\section*{Conclusioni e commenti finali}


%=======================
\section*{Dichiarazione}
I firmatari di questa relazione dichiarano che il contenuto della relazione \`e
originale, con misure effettuate dai membri del gruppo, e che tutti i firmatari
hanno contribuito alla elaborazione della relazione stessa.


\end{document}
