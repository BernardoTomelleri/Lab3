Version 4
SHEET 1 1516 732
WIRE 720 -16 672 -16
WIRE 784 -16 720 -16
WIRE 784 16 784 -16
WIRE 816 16 784 16
WIRE 928 32 880 32
WIRE 960 32 928 32
WIRE 816 48 800 48
WIRE 128 64 -16 64
WIRE -16 112 -16 64
WIRE -16 112 -48 112
WIRE 16 112 -16 112
WIRE 128 128 80 128
WIRE 800 128 800 48
WIRE 816 128 800 128
WIRE 928 128 928 32
WIRE 928 128 896 128
WIRE 16 144 -16 144
WIRE -16 160 -16 144
WIRE 368 240 304 240
WIRE 128 288 -16 288
WIRE -16 336 -16 288
WIRE -16 336 -48 336
WIRE 16 336 -16 336
WIRE 128 352 80 352
WIRE 720 352 720 288
WIRE 16 368 -16 368
WIRE -16 384 -16 368
WIRE 672 384 624 384
WIRE 672 416 672 384
WIRE 720 416 720 352
WIRE 720 416 672 416
WIRE 752 416 720 416
WIRE 880 432 880 352
WIRE 880 432 816 432
WIRE 928 432 880 432
WIRE 752 448 720 448
WIRE 720 464 720 448
FLAG -16 384 0
FLAG -128 336 CONTROL
IOPIN -128 336 In
FLAG 304 128 5V
FLAG 720 128 SET
IOPIN 720 128 In
FLAG 960 32 ERROR
IOPIN 960 32 Out
FLAG 304 320 -5V
FLAG 720 64 0
FLAG -16 160 0
FLAG -128 112 AD2_W2
IOPIN -128 112 In
FLAG 576 416 ERROR
IOPIN 576 416 In
FLAG 720 464 0
FLAG 928 432 CONTROL
IOPIN 928 432 Out
FLAG 368 240 MEAS
IOPIN 368 240 Out
FLAG 592 -16 MEAS
IOPIN 592 -16 In
FLAG 1184 16 5V
FLAG 1184 112 -5V
FLAG 1216 64 SET
IOPIN 1216 64 Out
SYMBOL LED 112 288 R0
SYMATTR InstName D2
SYMBOL Opamps/opamp 48 288 R0
WINDOW 0 0 32 Left 2
SYMATTR InstName U1
SYMBOL res -32 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 688 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 816 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL Opamps/opamp 848 96 M180
WINDOW 0 0 32 Left 2
SYMATTR InstName U3
SYMBOL res 912 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL res 288 224 R0
WINDOW 0 36 40 Left 2
WINDOW 3 36 76 Left 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 736 80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL LED 112 64 R0
SYMATTR InstName D1
SYMBOL Opamps/opamp 48 64 R0
WINDOW 0 0 32 Left 2
SYMATTR InstName U2
SYMBOL res -32 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL photores 288 128 R0
SYMATTR InstName R3
SYMATTR Value ""
SYMBOL pot 624 416 R90
WINDOW 0 30 -47 VRight 2
WINDOW 3 51 -36 VRight 2
WINDOW 123 26 15 VRight 2
SYMATTR InstName R9
SYMATTR Value R=100k
SYMATTR Value2 T=.99
SYMBOL Opamps/opamp 784 368 R0
WINDOW 0 0 32 Left 2
SYMATTR InstName U4
SYMBOL cap 784 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -18 -19 VTop 2
SYMATTR InstName C1
SYMATTR Value 220n
SYMBOL res 816 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -19 -6 VTop 2
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL pot 1184 64 R180
WINDOW 0 51 -25 Right 2
WINDOW 3 85 -1 Right 2
WINDOW 123 83 26 Right 2
SYMATTR InstName R11
SYMATTR Value R=2k
TEXT -112 416 Left 2 ;LED driver: Controllo
TEXT -112 192 Left 2 ;LED driver: Disturbo
TEXT 264 384 Left 2 ;Sensore
TEXT 600 184 Left 2 ;Calcolo errore e termine proporzionale
TEXT 544 504 Left 2 ;Inversione di polarità e termine integrale (opz.)
TEXT 1104 168 Left 2 ;Alternativa ad usare AD2_W1
LINE Normal 800 288 880 288 2
LINE Normal 880 352 784 352 2
LINE Normal 880 352 880 288 2
