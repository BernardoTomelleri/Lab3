\documentclass[10pt, a4paper, italian]{article}
\input{../../latex/preamble}
\geometry{left=2cm, right=2cm, top=2cm, bottom=2cm}
\newcommand{\rem}[1]{[\emph{#1}]}
\newcommand{\exn}{\phantom{xxx}}

% lets graphicx know path where figures to be included are found
\graphicspath{{../figs/}}

\author{Gruppo 1.AC \\ Matteo Rossi, Bernardo Tomelleri}
\title{Es01A: Uso dello strumento Analog Discovery 2.}
\begin{document}
\date{\today}
\maketitle

\setcounter{section}{1}

\section{Utilizzo del canale di alimentazione e del multimetro}

\subsection*{2.d Accensione diodo}

La tensione di alimentazione \`e stata variata nell'intervallo tra
$0.5\,\mathrm{V}$ e $5\,\mathrm{V}$


Si osserva che la luminosit\`a del diodo è proporzionale alla tensione
erogata dal generatore, una volta superata una tensione di soglia per cui
il LED inizia a emettere luce di intensità osservabile. La tensione di soglia
varia per i diversi colori; in particolare $V_\gamma$ risulta
proporzionale alla frequenza del colore di luce emessa. Dunque
rosso $<$ giallo $<$ verde $<$ blu.

\subsection*{2.e Misura tensione}
Utilizzando il multimetro si misura la resistenza R1 = $217 \pm 3 \,\Omega$
e la tensione ai capi del diodo e si ottiene:

\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|c|c|}
\hline
V+& $\sigma$ V+  & VD & $\sigma$ VD & I(R1)  & $\sigma$ I(R1) \\
\hline 
2.51 & 0.02 & 1.852 & 0.009 & 3.03 & 0.17 \\
2.51 & 0.02 & 1.931 & 0.009 & 2.67 & 0.17 \\
3.98 & 0.02 & 2.65 & 0.02 & 6.13 & 0.26 \\
3.98 & 0.02 & 2.76 & 0.02 & 5.62 & 0.25\\
\hline 
\end{tabular} 
\caption{(2.e) Dall'alto al basso tensione e corrente ai capi dei diodi
R-Y-G-B misurata con la stessa ddp in ingresso al circuito V+ $\approx 2.5$ V.
Tutte le tensioni in V e intensità di corrente in mA.\label{tab:VD-ID}}
\end{table}

%=======================
\section{Uso generatore di forme d'onda}
Con un'onda quadra di frequenza $\sim 10 \si{\Hz}$, ampiezza $\sim 2 \si{\V}$
e componente DC $\sim + 2 \si{\V}$ in ingresso alla serie di $R_1 +$ LED
rosso si vede bene come la tensione ai capi del diodo non si discosti
molto dalla tensione di accensione $V_\gamma \approx 1.85 \si{\V}$ anche
quando la tensione in ingresso V+ $\approx 2 \si{\V}$ (cioè quando l'onda
quadra è in alto) è sensibilmente superiore. In accordo con quanto previsto
dalla legge di Shockley per il diodo a giunzione ideale.
\begin{equation}\label{eq:shockley}
I_D = I_s \left(e^{\frac{V_D}{\eta V_T}} - 1 \right)
\end{equation}

Le bande semitrasparenti nelle tracce dei segnali indicano rumore a frequenza
più alta del sampling rate $f_s \approx 16 \si{k\Hz}$. Su entrambi i canali
si riesce infatti ad apprezzare come nel salto discontinuo dell'onda quadra
l'ampiezza superi il valore costante sul semiperiodo per via del fenomeno di
Gibbs. 

\begin{figure}[htb]
\centering
\includegraphics[scale=0.3]{sqwdiode}
\caption{(3.b) Onda quadra in ingresso $f \approx 10 \si{\Hz}$ al diodo.}
\end{figure}
\section{Oscilloscopio}

\subsection*{4.e Uso del trigger}

Quando la tensione di soglia del trigger (indicata dal triangolo giallo a
destra) incontra almeno un fronte di salita del segnale ai capi del diodo 
(CH1) la traccia rimane stabile sullo schermo. Mentre per valori di soglia
$> 2$ V o negativi la traccia viene disegnata ogni volta che il circuito di
trigger è autonomamente attivato dall'oscilloscopio, per cui il segnale sembra
spostarsi in maniera irregolare sullo schermo.

Si nota immediatamente come la tensione ai capi del diodo cresca di pari
passo con l'onda triangolare fino a quando la tensione di alimentazione 
raggiunge la tensione di soglia $V_\gamma$ del LED rosso. Una volta superata
$V_\gamma$ è la caduta di tensione sulla resistenza (CH2) a seguire il profilo
dell'onda triangolare, mentre la tensione ai capi del diodo cresce molto
lentamente; sempre secondo il modello di Shockley in maniera simile ad un
logaritmo.

\begin{figure}[htb]
\centering
\includegraphics[scale=0.3]{trgdiode_new}
\caption{(4.e) Relazione tra trigger e segnale}
\end{figure}


\subsection*{4.f Misura tensione massima ai capi del diodo}

La tensione massima ai capi del diodo misurata con i cursori risulta essere
$V_{\mathrm{MAX}}= (2.0 \pm 0.1) \,\mathrm{V}$. La funzione di misura
automatica fornisce il valore $V_{\mathrm{AUTO}}= 1.975 \,\mathrm{V}$

Le due misure sono compatibili, ma la seconda è notevolmente più precisa di
quella fatta ad occhio guardando la traccia sullo schermo. Questo perché la
prima è affetta da incertezza relativa dell'ordine dell' $1\%$ circa, che
deriva dalla lettura/posizionamento dei cursori sullo schermo. Mentre la
misura ottenuta mediante la funzione "Measurements" è data dalla media dei
campionamenti dell'ADC a 14 bit, che su fondo scala $\leq 0.5 \si{\V}/\rm div$
ha risoluzione nominale di $0.32 \si{m\V}$.


\section{Caratteristica del diodo}
\par

\subsection*{5.c Caratteristica del diodo}

\begin{figure}[htb]
\centering
\includegraphics[scale=0.4]{shockley_new}
\caption{(5.c) Caratteristica corrente-tensione del diodo in modalit\`a XY}
\end{figure}

\subsection*{5.d Fit curva del diodo}
La forma funzionale della legge di Shockley per il diodo ideale non segue
l'andamento osservato delle misure: Per differenze di potenziale superiori
alla tensione di soglia, l'intensità di corrente assume andamento polinomiale
rispetto alla tensione ai capi del diodo.

Si è utilizzata come modello una funzione uguale alla curva del diodo ideale di Shockley aggiungendoci un valore di corrente costante chiamato $I\ped{ofs}$:
\begin{equation}\label{eq:shockley_modificata}
I_D (x) = I_s \left(e^{\frac{x}{\eta V_T}} - 1 \right)+I\ped{ofs}
\end{equation}

Così facendo si ottengono i valori dei
parametri di best fit:
\begin{align*}
I_s &= 1.87 \pm 0.13  \; \times 10^{-18} \si{\A} \qquad &\rm{norm\_cov_{(I_s, \eta V_T)}} &= 0.998 \\
\eta_VT &= 57.3 \pm 0.12 \si{m\volt} \qquad &\rm{norm\_cov_{(I_s, I\ped{ofs})}} &= -0.170 \\
I\ped{ofs} &= 1.51 \pm 0.04 \; \si{\micro\A} \qquad &\rm{norm\_cov_{(\eta V_T, I\ped{ofs})}} &= -0.168  \\ 
\chi^2 &= 1.8 \times 10^5 / 8189 \qquad &\rm{abs\_sigma} &= \rm False
\end{align*}
che non hanno un gran senso.
\begin{figure}[htb]
\centering
\includegraphics[scale=0.37]{ivmatteo}
\caption{(2.b) Grafico $I_{D}$ vs. $V_{D}$ e fit all'equazione di Schockley}
\end{figure}

Si è poi data una stima della resistenza equivalente in serie del diodo nella
parte lineare della curva caratteristica $I-V$ tramite un fit lineare
\[
I(V) = V/R_D + I_0
\]
da cui risulta:
\begin{align*}
R_D &= 201.4 \pm 0.2 \; \si{\ohm} \\
I_0 &= -89.92 \pm 0.11 \; \si{m\A} \\
\rm{norm\_cov_{(R_D, I_0)}} &= -0.999 \\
\chi^2 &= 1890/2359 \\
\rm{abs\_sigma} &= \rm False \\
\end{align*}

La legge di Shockley assume che il diodo a giunzione si trovi a temperatura
costante, cioè $\eta V_T =$ costante. Noi non ne abbiamo misurato o
mantenuto costante la temperatura, mentre il diodo viene percorso da corrente,
per cui ci aspettiamo di vedere una deviazione dal modello di diodo ideale.

Non solo, il LED non è costituito dalla sola giunzione, ma è collegato a
reofori di materiale conduttore, che possono contribuire alla resistenza
trovata, così come altri effetti che trascuriamo; ad esempio la possibiltà di resistenze di contatto.

\begin{figure}[htb]
\centering
\includegraphics[scale=0.7]{ivlinfit}
\caption{(2.b) Grafico $I_{D}$ vs. $V_{D}$ e fit lineare per la componente
resistiva del diodo $R_D$.}
\end{figure}

\section{Partitore}

\subsection*{6.b Partitore con resistenze da 1k}

Si realizza un partitore con resistenze da $1 \,\mathrm{k}\Omega$.
Valori misurati con il multimetro: R1=$993 \pm 8 \,\Omega$,
R2=$993 \pm 8 \,\Omega$


\begin{table}[h]
\centering
\begin{tabular}{|c|c|c|c|c|c|}
\hline 
VIN& $\sigma$ VIN  & VOUT	 & $\sigma$ VOUT & VOUT/VIN & $\sigma$ VOUT/VIN \\
\hline 
1.000 & 0.005 & 0.500 & 0.003 & 0.500 & 0.008 \\
2.00 & 0.02 & 1.000 & 0.005 & 0.500 & 0.011 \\
3.00 & 0.02 & 1.500 & 0.008 & 0.500 &0.008 \\
4.00 & 0.03 & 2.00 & 0.02 & 0.500 & 0.012 \\
\hline 
\end{tabular} 
\caption{(6.b) Partitore di tensione con resistenze da circa 1k. Tutte le
tensioni in V.\label{tab:div1k}}
\end{table}

I valori di attenuazione attesi per il partitore risultano compatibili
con quelli misurati per tutti i valori di tensione compresi nell'intervallo
esplorato ($1 - 4$ V.)

\subsection*{6.d Partitore con resistenze da circa 1M}
\par
Si realizza un partitore con resistenze da $1 \,\mathrm{M}\Omega$.
Valori misurati con il multimetro: R1=$993 \pm 8 \,\mathrm{k}\Omega$,
R2=$996 \pm 8 \,\mathrm{k}\Omega$


\begin{table}[h]
\centering
\begin{tabular}{|c|c|c|c|c|c|}
\hline 
VIN& $\sigma$ VIN  &VOUT	 & $\sigma$ VOUT& VOUT/VIN & $\sigma$ VOUT/VIN \\
\hline 
1.000 & 0.005 & 0.481 & 0.003 & 0.481 & 0.008 \\
2.00 & 0.02 & 0.955 & 0.005 & 0.478 & 0.011 \\
3.00 & 0.02 & 1.431 & 0.007 & 0.477 & 0.008 \\
4.00 & 0.03 & 1.906 & 0.009 & 0.477 & 0.009 \\
\hline 
\end{tabular} 
\caption{(6.d) Partitore di tensione con resistenze da circa 1M.
Tutte le tensioni in V.\label{tab:div1M}}
\end{table}

La tensione in uscita dal partitore $R_1 + R_2$ risulta apprezzabilmente
inferiore rispetto al suo valore atteso. Questo è dovuto al comportamento
non ideale del voltmetro, per cui quando la sua impedenza in ingresso
$10 \si{\Mohm}$ (nom.) è paragonabile a quella della resistenza del partitore
a cui si trova in parallelo durante la misura, ne abbassa la resistenza
effettiva $R_2 \mapsto R_{\mathrm{eff}} = (\frac{1}{R_{\mathrm{in}}}
+ \frac{1}{R2})^{-1}$. Di conseguenza aumenta la corrente che passa per
il partitore, dunque la caduta di tensione ai capi di $R_1$, per cui
diminuiscono la tensione in uscita e quindi il valore di attenuazione, come
osservato.


\subsection*{6.e Resistenza di ingresso del multimetro}
Usando il modello mostrato nella scheda si ottiene
\begin{equation}\label{eq: divider}
\frac{R_1}{R_{IN}} =  \frac{V_{IN}}{V_{OUT}} - (1 +  \frac{R_1}{R_2} )
\end{equation}

Con i dati con resistenze da 1k si ottiene
\begin{equation}\label{eq: estimate}
R_1/R_{IN} = 0.00  \pm  0.04   \implies  R_{IN} \geq 1 \si{k\ohm}
\end{equation}


Con i dati con resistenze da 1M si ottiene
\[ R_1/R_{IN} = 0.09  \pm  0.04   \implies  R_{IN} = (11 \pm  5) \si{M\ohm}
\]

Quando la resistenza del multimetro $R_{IN} \gg R_2$ come visto al punto
6.b si ha $A \approx A_{\exp}$, per cui dalla \eqref{eq: divider}
\[
\frac{1}{A} - \frac{1}{A_{\exp}} = \frac{V_{IN}}{V_{OUT}} -
(1 +  \frac{R_1}{R_2}) = \frac{R_1}{R_{IN}}
\]
si vede come (a causa dell'incertezza sulla stima di $R_{IN}$ dalla
propagazione dell'errore sulla differenza) non sia possibile dare una misura
soddisfacente del suo valore. Ne possiamo però dare una stima dal basso:
\[
\frac{1}{A} \geq \frac{R_1}{R_{IN}} \implies R_{IN} \geq A R_1
\]
come in \eqref{eq: estimate}.

\section{Misure di tempo e frequenza}

\subsection*{7.e Misure di frequenza}
Misure con onda sinusoidale
\begin{table}[h]
\centering
\begin{tabular}{|c|c|c|c|c|c|}
\hline 
Periodo T ($\mu$ s)& $\sigma$ T ($\mu$ s) &Frequenza f (kHz) & $\sigma$ f (kHz) &
Misura oscilloscopio (kHz) & Differenza (kHz)\\
\hline 
999 & 10 & 0.99 & 0.01 & 1.0 & 0.01 \\
99.9 & 1.1 & 10.00 & 0.11 & 9.99 & 0.01 \\
9.99 & 0.10 & 100.0 & 1.0 & 99.98 & 0.02 \\
0.999 & 0.011 & 1000 & 11 & 1000.1 & 0.1 \\
\hline 
\end{tabular} 
\caption{(7.e) Misura di frequenza di onde sinusoidali e confronto con
misurazione interna dell'oscilloscopio }
\end{table}

\subsection*{7.f Misure di duty cyle}
Misure con onda quadra
\begin{table}[h]
\centering
\begin{tabular}{|c|c|c|c|c|c|}
\hline 
Periodo T ($\mu$ s)& $\sigma$ T ($\mu$ s) & Durata alto $t_H$ (s) & $\sigma$ $t_H$ (s)
& Duty cycle D(\%) & $\sigma$ D (\%) \\
\hline 
100 & 2 & 9 & 2 & 0.09 & 0.02 \\
100 & 2 & 50 & 2 & 0.50 & 0.02 \\
100 & 2 & 90 & 2 & 0.90 & 0.02 \\
\hline 
\end{tabular} 
\caption{(7.f) Misura di duty cycle per onde quadre }
\end{table}


\subsection*{7.g Tempo di salita e di discesa}
Misure su onda quadra
\[
f = (1.000 \pm 0.011) \si{M\Hz}, \quad
t_\mathrm{salita} = (35 \pm 6) \mathrm{ns},
t_\mathrm{discesa} = (37 \pm 6) \mathrm{ns},
\]

La misura è un po' balorda, visto che il tempo di salita/discesa è dello
stesso ordine di grandezza del periodo di campionamento $\nicefrac{1}{f_s} = \Delta t \approx 10 \si{\ns}$.
\begin{figure}[htb]
\centering
\includegraphics[scale=0.4]{tempo_salita}
\caption{(7.g) Misura del tempo di salita dell'onda quadra }

\includegraphics[scale=0.4]{tempo_discesa}
\caption{(7.g) Misura del tempo di discesa dell'onda quadra }
\end{figure}


\section{Conclusioni e commenti finali}
Si è riusciti ad apprezzare la differenza tra il comportamento ideale e quello
realmente esibito da due circuiti molto semplici. Nel primo per la non
trascurabilità dello strumento di misura sul funzionamento del partitore di
tensione (DUIT); nel secondo per la componente resistiva del diodo reale.

\section*{Dichiarazione}
I firmatari di questa relazione dichiarano che il contenuto della relazione
\`e originale, con misure effettuate dai membri del gruppo, e che tutti i
firmatari hanno contribuito alla elaborazione della relazione stessa.

\end{document}
